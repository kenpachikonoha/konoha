"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[2687],{"../grafana-data/src/datetime/datemath.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A_:function(){return isMathString},fn:function(){return isValid},qg:function(){return parse}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/lodash/lodash.js"),_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../grafana-data/src/datetime/moment_wrapper.ts"),units=["y","M","w","d","h","m","s","Q"];function isMathString(text){return!!text&&!("string"!=typeof text||"now"!==text.substring(0,3)&&!text.includes("||"))}function parse(text,roundUp,timezone,fiscalYearStartMonth){if(text){if("string"!=typeof text)return(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.Ar)(text)?text:(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isDate)(text)?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.KQ)(text):void 0;var time,index,parseString,mathString="";return"now"===text.substring(0,3)?(time=(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.oZ)(timezone),mathString=text.substring(3)):(-1===(index=text.indexOf("||"))?(parseString=text,mathString=""):(parseString=text.substring(0,index),mathString=text.substring(index+2)),time=(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.KQ)(parseString,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.mt)),mathString.length?function parseDateMath(mathString,time,roundUp){var fiscalYearStartMonth=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,strippedMathString=mathString.replace(/\s/g,""),result=(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.KQ)(time),i=0,len=strippedMathString.length;for(;i<len;){var c=strippedMathString.charAt(i++),type=void 0,num=void 0,unitString=void 0,isFiscal=!1;if("/"===c)type=0;else if("+"===c)type=1;else{if("-"!==c)return;type=2}if(isNaN(parseInt(strippedMathString.charAt(i),10)))num=1;else if(2===strippedMathString.length)num=parseInt(strippedMathString.charAt(i),10);else{for(var numFrom=i;!isNaN(parseInt(strippedMathString.charAt(i),10));)if(++i>10)return;num=parseInt(strippedMathString.substring(numFrom,i),10)}if(0===type&&1!==num)return;"f"===(unitString=strippedMathString.charAt(i++))&&(unitString=strippedMathString.charAt(i++),isFiscal=!0);var unit=unitString;if(!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.includes)(units,unit))return;0===type?isFiscal?roundToFiscal(fiscalYearStartMonth,result,unit,roundUp):roundUp?result.endOf(unit):result.startOf(unit):1===type?result.add(num,unit):2===type&&result.subtract(num,unit)}return result}(mathString,time,roundUp,fiscalYearStartMonth):time}}function isValid(text){var date=parse(text);return!!date&&(!!(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.Ar)(date)&&date.isValid())}function roundToFiscal(fyStartMonth,dateTime,unit,roundUp){switch(unit){case"y":return roundUp?roundToFiscal(fyStartMonth,dateTime,unit,!1).add(11,"M").endOf("M"):dateTime.subtract((dateTime.month()-fyStartMonth+12)%12,"M").startOf("M"),dateTime;case"Q":return roundUp?roundToFiscal(fyStartMonth,dateTime,unit,!1).add(2,"M").endOf("M"):dateTime.subtract((dateTime.month()-fyStartMonth+12)%3,"M").startOf("M"),dateTime;default:return}}},"../grafana-data/src/datetime/formats.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}__webpack_require__.d(__webpack_exports__,{Od:function(){return localTimeFormat},WC:function(){return systemDateFormats}});var DEFAULT_SYSTEM_DATE_FORMAT="YYYY-MM-DD HH:mm:ss";function localTimeFormat(options,locale,fallback){if(missingIntlDateTimeFormatSupport())return null!=fallback?fallback:DEFAULT_SYSTEM_DATE_FORMAT;!locale&&navigator&&(locale=_to_consumable_array(navigator.languages));var dateTimeFormat=new Intl.DateTimeFormat(locale||void 0,options),parts=dateTimeFormat.formatToParts(new Date),mapping={year:"YYYY",month:"MM",day:"DD",hour:dateTimeFormat.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return parts.map((function(part){return mapping[part.type]||part.value})).join("")}var systemDateFormats=new(function(){function SystemDateFormatsState(){!function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SystemDateFormatsState),_define_property(this,"fullDate",DEFAULT_SYSTEM_DATE_FORMAT),_define_property(this,"fullDateMS","YYYY-MM-DD HH:mm:ss.SSS"),_define_property(this,"interval",{millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"})}return function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SystemDateFormatsState,[{key:"update",value:function update(settings){this.fullDate=settings.fullDate,this.interval=settings.interval,settings.useBrowserLocale&&this.useBrowserLocale()}},{key:"useBrowserLocale",value:function useBrowserLocale(){this.fullDate=localTimeFormat({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=localTimeFormat({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=localTimeFormat({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=localTimeFormat({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=localTimeFormat({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=localTimeFormat({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=localTimeFormat({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}},{key:"getTimeFieldUnit",value:function getTimeFieldUnit(useMsResolution){return"time:".concat(useMsResolution?this.fullDateMS:this.fullDate)}}]),SystemDateFormatsState}()),missingIntlDateTimeFormatSupport=function(){return!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)}},"../grafana-data/src/datetime/parser.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{b:function(){return dateTimeParse}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/lodash/lodash.js"),moment_timezone__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/moment-timezone/index.js"),moment_timezone__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_1__),_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../grafana-data/src/datetime/common.ts"),_datemath__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../grafana-data/src/datetime/datemath.ts"),_formats__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../grafana-data/src/datetime/formats.ts"),_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../grafana-data/src/datetime/moment_wrapper.ts"),dateTimeParse=function(value,options){return(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.Ar)(value)?value:"string"==typeof value?parseString(value,options):parseOthers(value,options)},parseString=function(value,options){if(-1!==value.indexOf("now"))return(0,_datemath__WEBPACK_IMPORTED_MODULE_3__.fn)(value)&&(0,_datemath__WEBPACK_IMPORTED_MODULE_3__.qg)(value,null==options?void 0:options.roundUp,null==options?void 0:options.timeZone,null==options?void 0:options.fiscalYearStartMonth)||(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.KQ)();var _options_format,timeZone=(0,_common__WEBPACK_IMPORTED_MODULE_4__.O)(options),zone=moment_timezone__WEBPACK_IMPORTED_MODULE_1___default().tz.zone(timeZone),format=null!==(_options_format=null==options?void 0:options.format)&&void 0!==_options_format?_options_format:_formats__WEBPACK_IMPORTED_MODULE_5__.WC.fullDate;return zone&&zone.name?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.oZ)(zone.name,value,format):"utc"===(0,lodash__WEBPACK_IMPORTED_MODULE_0__.lowerCase)(timeZone)?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.yT)(value,format):(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.KQ)(value,format)},parseOthers=function(value,options){var date=value,timeZone=(0,_common__WEBPACK_IMPORTED_MODULE_4__.O)(options),zone=moment_timezone__WEBPACK_IMPORTED_MODULE_1___default().tz.zone(timeZone);return zone&&zone.name?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.oZ)(zone.name,date):"utc"===(0,lodash__WEBPACK_IMPORTED_MODULE_0__.lowerCase)(timeZone)?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.yT)(date):(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.KQ)(date)}},"./src/components/DateTimePickers/TimeRangePicker/CalendarBody.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{h2:function(){return getBodyStyles},nB:function(){return Body}});var _emotion_css__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),react_calendar__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react-calendar/dist/esm/index.js"),_grafana_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../grafana-data/src/datetime/parser.ts"),_themes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/themes/ThemeContext.tsx"),_Icon_Icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Icon/Icon.tsx"),_utils_adjustDateForReactCalendar__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/DateTimePickers/utils/adjustDateForReactCalendar.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Body(param){var onChange=param.onChange,from=param.from,to=param.to,timeZone=param.timeZone,value=function inputToValue(from,to){var invalidDateDefault=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,timezone=arguments.length>3?arguments[3]:void 0,fromAsDate=from.isValid()?from.toDate():invalidDateDefault,toAsDate=to.isValid()?to.toDate():invalidDateDefault;timezone&&(fromAsDate=(0,_utils_adjustDateForReactCalendar__WEBPACK_IMPORTED_MODULE_5__.Q)(fromAsDate,timezone),toAsDate=(0,_utils_adjustDateForReactCalendar__WEBPACK_IMPORTED_MODULE_5__.Q)(toAsDate,timezone));if(fromAsDate>toAsDate)return[toAsDate,fromAsDate];return[fromAsDate,toAsDate]}(from,to,new Date,timeZone),onCalendarChange=function useOnCalendarChange(onChange,timeZone){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(value){if(!Array.isArray(value))return console.error("onCalendarChange: should be run in selectRange={true}");if(value[0]&&value[1]){var from=(0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.b)(dateInfo(value[0]),{timeZone:timeZone}),to=(0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.b)(dateInfo(value[1]),{timeZone:timeZone});onChange(from,to)}}),[onChange,timeZone])}(onChange,timeZone),styles=(0,_themes__WEBPACK_IMPORTED_MODULE_2__.of)(getBodyStyles);return react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_calendar__WEBPACK_IMPORTED_MODULE_3__.Ay,{selectRange:!0,next2Label:null,prev2Label:null,className:styles.body,tileClassName:styles.title,value:value,nextLabel:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_4__.I,{name:"angle-right"}),prevLabel:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_4__.I,{name:"angle-left"}),onChange:onCalendarChange,locale:"en"})}function dateInfo(date){return[date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds()]}Body.displayName="Body";var getBodyStyles=function(theme){var _obj,hasActiveSelector=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.AH)({color:theme.colors.text.primary,backgroundColor:theme.colors.background.primary,fontSize:theme.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:theme.colors.action.disabledText}}),body:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.AH)((_obj={zIndex:theme.zIndex.modal,backgroundColor:theme.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:theme.colors.text.primary,border:0,fontWeight:theme.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:theme.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0}},_define_property(_obj,"".concat(hasActiveSelector,", .react-calendar__tile--active, .react-calendar__tile--active:hover"),{color:theme.colors.primary.contrastText,fontWeight:theme.typography.fontWeightMedium,background:theme.colors.primary.main,boxShadow:"none",border:"0px"}),_define_property(_obj,".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart",{padding:0,border:"0px",color:theme.colors.primary.contrastText,fontWeight:theme.typography.fontWeightMedium,background:theme.colors.primary.main,abbr:{backgroundColor:theme.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}}),_define_property(_obj,"".concat(hasActiveSelector,", .react-calendar__tile--rangeStart"),{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"}),_define_property(_obj,"".concat(hasActiveSelector,", .react-calendar__tile--rangeEnd"),{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}),_obj))}};try{Body.displayName="Body",Body.__docgenInfo={description:"",displayName:"Body",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},from:{defaultValue:null,description:"",name:"from",required:!0,type:{name:"DateTime"}},to:{defaultValue:null,description:"",name:"to",required:!0,type:{name:"DateTime"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onApply:{defaultValue:null,description:"",name:"onApply",required:!0,type:{name:"(e: FormEvent<HTMLButtonElement>) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(from: DateTime, to: DateTime) => void"}},isFullscreen:{defaultValue:null,description:'When true, the calendar is rendered as a floating "tooltip" next to the input.\nWhen false, the calendar is rendered "fullscreen" in a modal. Yes. Don\'t ask.',name:"isFullscreen",required:!0,type:{name:"boolean"}},timeZone:{defaultValue:null,description:"",name:"timeZone",required:!1,type:{name:"string"}},isReversed:{defaultValue:null,description:"",name:"isReversed",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateTimePickers/TimeRangePicker/CalendarBody.tsx#Body"]={docgenInfo:Body.__docgenInfo,name:"Body",path:"src/components/DateTimePickers/TimeRangePicker/CalendarBody.tsx#Body"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/DateTimePickers/utils/adjustDateForReactCalendar.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Q:function(){return adjustDateForReactCalendar}});var _grafana_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../grafana-data/src/datetime/timezones.ts");function adjustDateForReactCalendar(date,timeZone){var zone=(0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.HD)(timeZone);if(!zone)return date;var diff=zone.utcOffset(date.getTime())-date.getTimezoneOffset();return new Date(date.getTime()-1e3*diff*60)}}}]);