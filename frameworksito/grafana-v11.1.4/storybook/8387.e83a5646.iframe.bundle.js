"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[8387],{"../grafana-data/src/events/common.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function _assert_this_initialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_get_prototype_of(o)}function _possible_constructor_return(self,call){return!call||"object"!==function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}(call)&&"function"!=typeof call?_assert_this_initialized(self):call}function _set_prototype_of(o,p){return _set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o},_set_prototype_of(o,p)}function _create_super(Derived){var hasNativeReflectConstruct=function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);if(hasNativeReflectConstruct){var NewTarget=_get_prototype_of(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possible_constructor_return(this,result)}}__webpack_require__.d(__webpack_exports__,{ql:function(){return DataHoverClearEvent},b_:function(){return DataHoverEvent}});var BusEventBase=function(){function BusEventBase(){_class_call_check(this,BusEventBase),_define_property(this,"type",void 0),_define_property(this,"payload",void 0),_define_property(this,"origin",void 0),_define_property(this,"tags",void 0),this.type=this.__proto__.constructor.type}return function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BusEventBase,[{key:"setTags",value:function setTags(tags){return this.tags=new Set(tags),this}}]),BusEventBase}(),BusEventWithPayload=function(BusEventBase){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}(BusEventWithPayload,BusEventBase);var _super=_create_super(BusEventWithPayload);function BusEventWithPayload(payload){var _this;return _class_call_check(this,BusEventWithPayload),_define_property(_assert_this_initialized(_this=_super.call(this)),"payload",void 0),_this.payload=payload,_this}return BusEventWithPayload}(BusEventBase);function common_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function common_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function common_get_prototype_of(o){return common_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},common_get_prototype_of(o)}function common_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&common_set_prototype_of(subClass,superClass)}function common_possible_constructor_return(self,call){return!call||"object"!==function common_type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}(call)&&"function"!=typeof call?function common_assert_this_initialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function common_set_prototype_of(o,p){return common_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o},common_set_prototype_of(o,p)}function common_create_super(Derived){var hasNativeReflectConstruct=function common_is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=common_get_prototype_of(Derived);if(hasNativeReflectConstruct){var NewTarget=common_get_prototype_of(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return common_possible_constructor_return(this,result)}}var DataHoverEvent=function(BusEventWithPayload){common_inherits(DataHoverEvent,BusEventWithPayload);var _super=common_create_super(DataHoverEvent);function DataHoverEvent(){return common_class_call_check(this,DataHoverEvent),_super.apply(this,arguments)}return DataHoverEvent}(BusEventWithPayload);common_define_property(DataHoverEvent,"type","data-hover");var DataHoverClearEvent=function(BusEventBase){common_inherits(DataHoverClearEvent,BusEventBase);var _super=common_create_super(DataHoverClearEvent);function DataHoverClearEvent(){return common_class_call_check(this,DataHoverClearEvent),_super.apply(this,arguments)}return DataHoverClearEvent}(BusEventBase);common_define_property(DataHoverClearEvent,"type","data-hover-clear");var DataSelectEvent=function(BusEventWithPayload){common_inherits(DataSelectEvent,BusEventWithPayload);var _super=common_create_super(DataSelectEvent);function DataSelectEvent(){return common_class_call_check(this,DataSelectEvent),_super.apply(this,arguments)}return DataSelectEvent}(BusEventWithPayload);common_define_property(DataSelectEvent,"type","data-select");var AnnotationChangeEvent=function(BusEventWithPayload){common_inherits(AnnotationChangeEvent,BusEventWithPayload);var _super=common_create_super(AnnotationChangeEvent);function AnnotationChangeEvent(){return common_class_call_check(this,AnnotationChangeEvent),_super.apply(this,arguments)}return AnnotationChangeEvent}(BusEventWithPayload);common_define_property(AnnotationChangeEvent,"type","annotation-event");var DashboardLoadedEvent=function(BusEventWithPayload){common_inherits(DashboardLoadedEvent,BusEventWithPayload);var _super=common_create_super(DashboardLoadedEvent);function DashboardLoadedEvent(){return common_class_call_check(this,DashboardLoadedEvent),_super.apply(this,arguments)}return DashboardLoadedEvent}(BusEventWithPayload);common_define_property(DashboardLoadedEvent,"type","dashboard-loaded");var DataSourceUpdatedSuccessfully=function(BusEventBase){common_inherits(DataSourceUpdatedSuccessfully,BusEventBase);var _super=common_create_super(DataSourceUpdatedSuccessfully);function DataSourceUpdatedSuccessfully(){return common_class_call_check(this,DataSourceUpdatedSuccessfully),_super.apply(this,arguments)}return DataSourceUpdatedSuccessfully}(BusEventBase);common_define_property(DataSourceUpdatedSuccessfully,"type","datasource-updated-successfully");var DataSourceTestSucceeded=function(BusEventBase){common_inherits(DataSourceTestSucceeded,BusEventBase);var _super=common_create_super(DataSourceTestSucceeded);function DataSourceTestSucceeded(){return common_class_call_check(this,DataSourceTestSucceeded),_super.apply(this,arguments)}return DataSourceTestSucceeded}(BusEventBase);common_define_property(DataSourceTestSucceeded,"type","datasource-test-succeeded");var DataSourceTestFailed=function(BusEventBase){common_inherits(DataSourceTestFailed,BusEventBase);var _super=common_create_super(DataSourceTestFailed);function DataSourceTestFailed(){return common_class_call_check(this,DataSourceTestFailed),_super.apply(this,arguments)}return DataSourceTestFailed}(BusEventBase);common_define_property(DataSourceTestFailed,"type","datasource-test-failed");var SetPanelAttentionEvent=function(BusEventWithPayload){common_inherits(SetPanelAttentionEvent,BusEventWithPayload);var _super=common_create_super(SetPanelAttentionEvent);function SetPanelAttentionEvent(){return common_class_call_check(this,SetPanelAttentionEvent),_super.apply(this,arguments)}return SetPanelAttentionEvent}(BusEventWithPayload);common_define_property(SetPanelAttentionEvent,"type","set-panel-attention")},"./src/components/PanelChrome/PanelContext.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{d2:function(){return usePanelContext}});var react=__webpack_require__("../../node_modules/react/index.js"),eventemitter3=__webpack_require__("../../node_modules/eventemitter3/index.mjs"),Observable=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/Observable.js"),filter=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupported_iterable_to_array(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupported_iterable_to_array(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_array_like_to_array(o,minLen):void 0}}var EventBusSrv=function(){function EventBusSrv(){_class_call_check(this,EventBusSrv),_define_property(this,"emitter",void 0),_define_property(this,"subscribers",new Map),this.emitter=new eventemitter3.A}return _create_class(EventBusSrv,[{key:"publish",value:function publish(event){this.emitter.emit(event.type,event)}},{key:"subscribe",value:function subscribe(typeFilter,handler){return this.getStream(typeFilter).subscribe({next:handler})}},{key:"getStream",value:function getStream(eventType){var _this=this;return new Observable.c((function(observer){var handler=function(event){observer.next(event)};return _this.emitter.on(eventType.type,handler),_this.subscribers.set(handler,observer),function(){_this.emitter.off(eventType.type,handler),_this.subscribers.delete(handler)}}))}},{key:"newScopedBus",value:function newScopedBus(key,filter){return new ScopedEventBus([key],this,filter)}},{key:"emit",value:function emit(event,payload){"string"==typeof event?this.emitter.emit(event,{type:event,payload:payload}):this.emitter.emit(event.name,{type:event.name,payload:payload})}},{key:"on",value:function on(event,handler,scope){var _this=this;if(handler.wrapper=function(emittedEvent){handler(emittedEvent.payload)},"string"==typeof event?this.emitter.on(event,handler.wrapper):this.emitter.on(event.name,handler.wrapper),scope)var unbind=scope.$on("$destroy",(function(){_this.off(event,handler),unbind()}))}},{key:"off",value:function off(event,handler){"string"!=typeof event?this.emitter.off(event.name,handler.wrapper):this.emitter.off(event,handler.wrapper)}},{key:"removeAllListeners",value:function removeAllListeners(){this.emitter.removeAllListeners();var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.subscribers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step_value=_sliced_to_array(_step.value,2),key=_step_value[0];_step_value[1].complete(),this.subscribers.delete(key)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),EventBusSrv}(),ScopedEventBus=function(){function ScopedEventBus(path,eventBus,filter){_class_call_check(this,ScopedEventBus),_define_property(this,"path",void 0),_define_property(this,"eventBus",void 0),_define_property(this,"filterConfig",void 0),this.path=path,this.eventBus=eventBus,this.filterConfig=null!=filter?filter:{onlyLocal:!1}}return _create_class(ScopedEventBus,[{key:"publish",value:function publish(event){event.origin||(event.origin=this),this.eventBus.publish(event)}},{key:"filter",value:function filter(event){return!this.filterConfig.onlyLocal||event.origin===this}},{key:"getStream",value:function getStream(eventType){return this.eventBus.getStream(eventType).pipe((0,filter.p)(this.filter.bind(this)))}},{key:"subscribe",value:function subscribe(typeFilter,handler){return this.getStream(typeFilter).subscribe({next:handler})}},{key:"removeAllListeners",value:function removeAllListeners(){this.eventBus.removeAllListeners()}},{key:"newScopedBus",value:function newScopedBus(key,filter){return new ScopedEventBus(_to_consumable_array(this.path).concat([key]),this,filter)}}]),ScopedEventBus}(),PanelContextRoot=react.createContext({eventsScope:"global",eventBus:new EventBusSrv}),usePanelContext=(PanelContextRoot.Provider,function(){return react.useContext(PanelContextRoot)})}}]);