"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[123],{21821:(f,u,e)=>{e.r(u),e.d(u,{default:()=>D});var t=e(96540),B=e(71468),r=e(72724),E=e(55852),l=e(62930),d=e(29158),p=e(67608),_=e(10096),i=e(31678),o=e(58330);const P=t.createElement("span",null,"Support bundles allow you to easily collect and share Grafana logs, configuration, and data with the Grafana Labs team."),n=t.createElement(E.z9,{icon:"plus",href:"support-bundles/create",variant:"primary"},"New support bundle"),a=c=>({supportBundles:c.supportBundles.supportBundles,isLoading:c.supportBundles.isLoading}),m={loadBundles:o.WJ,removeBundle:o.Hb,checkBundles:o.ac},D=(0,B.connect)(a,m)(({supportBundles:c,isLoading:O,loadBundles:h,removeBundle:A,checkBundles:M})=>{const v=c.some(s=>s.state==="pending");(0,t.useEffect)(()=>{h()},[h]),(0,t.useEffect)(()=>{v&&M()});const C=_.contextSrv.hasPermission(i.AccessControlAction.ActionSupportBundlesCreate),g=_.contextSrv.hasPermission(i.AccessControlAction.ActionSupportBundlesDelete),y=C?n:void 0;return t.createElement(p.Y,{navId:"support-bundles",subTitle:P,actions:y},t.createElement(p.Y.Contents,{isLoading:O},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Created on"),t.createElement("th",null,"Requested by"),t.createElement("th",null,"Expires"),t.createElement("th",{style:{width:"32px"}}),t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"1%"}}))),t.createElement("tbody",null,c?.map(s=>t.createElement("tr",{key:s.uid},t.createElement("th",null,(0,r.LE)(s.createdAt*1e3)),t.createElement("th",null,s.creator),t.createElement("th",null,(0,r.LE)(s.expiresAt*1e3)),t.createElement("th",null,s.state==="pending"&&t.createElement(l.y,null)),t.createElement("th",null,t.createElement(E.z9,{fill:"outline",disabled:s.state!=="complete",target:"_self",href:`/api/support-bundles/${s.uid}`},"Download")),t.createElement("th",null,g&&t.createElement(d.K,{onClick:()=>A(s.uid),name:"trash-alt",variant:"destructive",tooltip:"Remove bundle"}))))))))})},58330:(f,u,e)=>{e.d(u,{Hb:()=>i,OS:()=>o,WJ:()=>d,ac:()=>_,iO:()=>P});var t=e(2543),B=e.n(t),r=e(17172),E=e(12131),l=e(8212);function d(n=!1){return async a=>{try{n||a((0,l.sF)());const m=await(0,r.AI)().get("/api/support-bundles");a((0,l.sJ)(m))}finally{a((0,l.kH)())}}}const p=(0,t.throttle)(async n=>{const a=await(0,r.AI)().get("/api/support-bundles");n((0,l.sJ)(a))},1e3);function _(){return async n=>{n(p)}}function i(n){return async a=>{await(0,r.AI)().delete(`/api/support-bundles/${n}`),a(d(!0))}}function o(){return async n=>{try{n((0,l.Y1)());const a=await(0,r.AI)().get("/api/support-bundles/collectors");n((0,l.j7)(a))}catch{n((0,l.pB)("Error loading support bundles data collectors"))}finally{n((0,l.s7)())}}}function P(n){return async a=>{try{await(0,r.AI)().post("/api/support-bundles",n),E.Ny.push("/support-bundles")}catch{a((0,l.NV)("Error creating support bundle"))}}}}}]);

//# sourceMappingURL=SupportBundles.79214599841ace73b3c7.js.map