"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3932],{64853:(I,E,e)=>{e.d(E,{_:()=>m});var o=e(2543),_=e.n(o),n=e(96540),a=e(19073);const m=({actions:u,children:f})=>{const v=(0,o.filter)(u,C),A=(0,o.filter)(u,D);return v.length?n.createElement(d,{actions:v},f):A.length?n.createElement(P,{actions:A},f):null},d=({actions:u,children:f})=>{const v=(0,a.iI)();return M(v,u)?n.createElement(n.Fragment,null,f):null},P=({actions:u,children:f})=>{const v=(0,a.e2)();return M(v,u)?n.createElement(n.Fragment,null,f):null};function M(u,f){return(0,o.chain)(u).pick(f).values().value().some(([v,A])=>A===!0)}function C(u){return Object.values(a.QI).includes(u)}function D(u){return Object.values(a.RY).includes(u)}},64047:(I,E,e)=>{e.d(E,{e:()=>n});var o=e(96540),_=e(55852);const n=({isCollapsed:a,onToggle:m,idControlled:d,className:P,text:M,size:C="xl",...D})=>o.createElement(_.$n,{type:"button",fill:"text",variant:"secondary","aria-expanded":!a,"aria-controls":d,className:P,icon:a?"angle-right":"angle-down",onClick:()=>m(!a),...D},M)},23896:(I,E,e)=>{e.d(E,{A:()=>n});var o=e(96540);function _({children:a,shouldWrap:m,wrap:d},P){return m?o.cloneElement(d(a)):a}const n=(0,o.forwardRef)(_)},57895:(I,E,e)=>{e.d(E,{M:()=>C});var o=e(32196),_=e(96540),n=e(40845),a=e(42418),m=e(60021),d=e(82843),P=e(19073),M=e(57220);function C({currentAlertmanager:u}){const f=(0,n.of)(D),v=u!==M.hY,[A,T]=(0,P.Ej)(P.RY.ReadConfigurationStatus),p=A&&T,{currentData:t}=d.m.endpoints.getGrafanaAlertingConfigurationStatus.useQuery(void 0,{skip:v||!p});if(!(t?.alertmanagersChoice&&[m.nA.External,m.nA.All].includes(t?.alertmanagersChoice))||v)return null;const l=t.numExternalAlertmanagers>0;return t.alertmanagersChoice===m.nA.External?_.createElement(a.F,{title:"Grafana alerts are not delivered to Grafana Alertmanager"},"Grafana is configured to send alerts to external Alertmanagers only. Changing Grafana Alertmanager configuration will not affect delivery of your alerts.",_.createElement("div",{className:f.adminHint},"To change your Alertmanager setup, go to the Alerting Admin page. If you do not have access, contact your Administrator.")):t.alertmanagersChoice===m.nA.All&&l?_.createElement(a.F,{title:"You have additional Alertmanagers to configure",severity:"warning"},"Ensure you make configuration changes in the correct Alertmanagers; both internal and external. Changing one will not affect the others.",_.createElement("div",{className:f.adminHint},"To change your Alertmanager setup, go to the Alerting Admin page. If you do not have access, contact your Administrator.")):null}const D=u=>({adminHint:(0,o.css)({fontSize:u.typography.bodySmall.fontSize,fontWeight:u.typography.bodySmall.fontWeight})})},16293:(I,E,e)=>{e.d(E,{J:()=>v});var o=e(32196),_=e(4213),n=e.n(_),a=e(96540),m=e(70713),d=e(40845),P=e(32372),M=e(55852),C=e(10534),D=e(72109),u=e(42418),f=e(84029);function v({format:p,textDefinition:t,downloadFileName:r,onClose:l}){const s=(0,d.of)(A),c=f.sl[p],g=(0,a.useCallback)(()=>{const i=new Blob([t],{type:`application/${p};charset=utf-8`});n()(i,`${r}.${p}`)},[t,r,p]),h=(0,a.useMemo)(()=>c.formatter?c.formatter(t):t,[c,t]);return a.createElement("div",{className:s.container},a.createElement(T,{exportProvider:c}),a.createElement("div",{className:s.content},a.createElement(m.Ay,{disableWidth:!0},({height:i})=>a.createElement(P.B,{width:"100%",height:i,language:p,value:h,monacoOptions:{minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",readOnly:!0}}))),a.createElement("div",{className:s.actions},a.createElement(M.$n,{variant:"secondary",onClick:l},"Cancel"),a.createElement(C.b,{icon:"copy",getText:()=>t},"Copy code"),a.createElement(M.$n,{icon:"download-alt",onClick:g},"Download")))}const A=p=>({container:(0,o.css)({display:"flex",flexDirection:"column",height:"100%",gap:p.spacing(2)}),content:(0,o.css)({flex:"1 1 100%"}),actions:(0,o.css)({flex:0,justifyContent:"flex-end",display:"flex",gap:p.spacing(1)})});function T({exportProvider:p}){const{name:t,type:r}=p,l={file:{title:"File-provisioning format",component:a.createElement(a.Fragment,null,t," format is only valid for File Provisioning."," ",a.createElement(D.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/",external:!0},"Read more in the docs."))},api:{title:"API-provisioning format",component:a.createElement(a.Fragment,null,t," format is only valid for API Provisioning."," ",a.createElement(D.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/http-api-provisioning/",external:!0},"Read more in the docs."))},terraform:{title:"Terraform-provisioning format",component:a.createElement(a.Fragment,null,t," format is only valid for Terraform Provisioning."," ",a.createElement(D.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/",external:!0},"Read more in the docs."))}},{title:s,component:c}=l[r];return a.createElement(u.F,{title:s,severity:"info",bottomSpacing:0,topSpacing:0},c)}},76648:(I,E,e)=>{e.d(E,{m:()=>a});var o=e(96540),_=e(87978),n=e(73716);function a({activeTab:m,onTabChange:d,children:P,onClose:M,formatProviders:C,title:D="Export"}){const u=Object.values(C).map(f=>({label:f.name,value:f.exportFormat}));return o.createElement(_._,{title:D,subtitle:"Select the format and download the file or copy the contents to clipboard",tabs:o.createElement(n.sb,{tabs:u,setActiveTab:d,activeTab:m}),onClose:M,size:"md"},P)}},84029:(I,E,e)=>{e.d(E,{sl:()=>a});const o={name:"JSON",exportFormat:"json",type:"file",formatter:d=>{try{return JSON.stringify(JSON.parse(d),null,4)}catch{return d}}},_={name:"YAML",exportFormat:"yaml",type:"file"},n={name:"Terraform (HCL)",exportFormat:"hcl",type:"terraform"},a={[o.exportFormat]:o,[_.exportFormat]:_,[n.exportFormat]:n},m=[o,_]},73716:(I,E,e)=>{e.d(E,{G_:()=>t,sb:()=>r});var o=e(32196),_=e(20382),n=e(96540),a=e(49785),m=e(70713),d=e(40845),P=e(87978),M=e(63021),C=e(40675),D=e(55852),u=e(56034),f=e(14578),v=e(32372),A=e(63066),T=e(23662);const p=[{label:"Yaml",value:"yaml"}],t=({onClose:i})=>{const[O,y]=(0,n.useState)("yaml"),{setValue:R}=(0,a.xW)(),B=(0,d.of)(h),K=L=>{for(const W in L)R(W,L[W]);i()};return n.createElement(P._,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:B.subtitle},n.createElement(r,{tabs:p,setActiveTab:y,activeTab:O})),onClose:i},O==="yaml"&&n.createElement(l,{onSubmit:K}))};function r({tabs:i,activeTab:O,setActiveTab:y}){return n.createElement(M.U,null,i.map((R,B)=>n.createElement(C.o,{key:`${R.value}-${B}`,label:R.label,value:R.value,onChangeTab:()=>y(R.value),active:O===R.value})))}const l=({onSubmit:i})=>{const O=(0,d.of)(g),{getValues:y}=(0,a.xW)(),R=(0,A.l1)(y()),[B,K]=(0,n.useState)((0,_.Bh)(R)),L=()=>{const W=(0,_.Hh)(B),U=y(),x=c(W);i({...U,...x})};return n.createElement(n.Fragment,null,n.createElement("div",{className:O.applyButton},n.createElement(D.$n,{type:"button",onClick:L},"Apply"),n.createElement(u.m,{content:n.createElement(s,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(f.I,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:O.content},n.createElement(m.Ay,{disableWidth:!0},({height:W})=>n.createElement(v.B,{width:"100%",height:W,language:"yaml",value:B,onBlur:K,monacoOptions:{minimap:{enabled:!1}}}))))};function s(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function c(i){return(0,T.$y)(i)?(0,A.Qk)(i):(0,T.i7)(i)?(0,A.XI)(i):{}}const g=i=>({content:(0,o.css)({flexGrow:1,height:"100%",paddingBottom:"16px",marginBottom:i.spacing(2)}),applyButton:(0,o.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:0,marginBottom:i.spacing(2)})}),h=()=>({subtitle:(0,o.css)({display:"flex",alignItems:"center",justifyContent:"space-between"})})},51488:(I,E,e)=>{e.d(E,{f:()=>_});var o=e(82843);function _(n,a){const m=o.m.endpoints.getAlertmanagerConfiguration.useQuery(n??"",{refetchOnMountOrArgChange:!0,...a,skip:!n});return{...m,error:m.error}}},19645:(I,E,e)=>{e.d(E,{M:()=>o});const o={discord:"discord",email:"envelope",googlechat:"google-hangouts-alt",hipchat:"hipchat",line:"line",pagerduty:"pagerduty",slack:"slack",teams:"microsoft",telegram:"telegram-alt",webhook:"link",sns:"amazon"}},79581:(I,E,e)=>{e.d(E,{W$:()=>f,_I:()=>v,rJ:()=>C});var o=e(2543),_=e.n(o),n=e(60021),a=e(32642);const m=["receiver","group_by","group_wait","group_interval","repeat_interval"];function d(t,r){const l=P(t,r),s=new Map(r.map(c=>[c,{match:!1,matcher:null}]));return t.forEach(c=>{const g=r.find(h=>p(c,h));g&&s.set(g,{match:!0,matcher:c})}),{matches:l,labelsMatch:s}}function P(t,r){for(const l of t)if(!T(l,r))return!1;return!0}function M(t,r){let l=[];const s=d(t.object_matchers??[],r);if(!s.matches)return[];if(t.routes)for(const c of t.routes){let g=M(c,r);if(l=l.concat(g),g.length&&!c.continue)break}return l.length===0&&l.push({route:t,labelsMatch:s.labelsMatch}),l}function C(t){function r(s){s.object_matchers=(0,a.J$)(s),delete s.matchers,delete s.match,delete s.match_re,s.routes?.forEach(r)}const l=structuredClone(t);return r(l),l}function D(t){function r(s){s.object_matchers=s.object_matchers?.map(([c,g,h])=>[unquoteWithUnescape(c),g,unquoteWithUnescape(h)]),s.routes?.forEach(r)}const l=structuredClone(t);return r(l),l}function u(t,r,l){const s=[];return l.reduce((c,g)=>{const h=g.alerts.filter(i=>{const O=Object.entries(i.labels);return M(t,O).some(y=>y.route===r)});return h.length&&c.push({...g,alerts:h}),c},s)}function f(t,r,l){const c={...(0,o.pick)(t,m),...l};return(0,o.reduce)(c,(h,i,O)=>{const y=i!=null,K=[void 0,"",null].some(U=>r[O]===U)&&y,L=O==="group_by"&&y&&(0,o.isArray)(r[O])&&r[O]?.length===0;return(K||L)&&(h[O]=i),h},{})}function v(t){return{...t,routes:t.routes?.map(r=>{const l=f(t,r);return v({...r,...l})})}}const A={[n.ho.equal]:(t,r)=>t===r,[n.ho.notEqual]:(t,r)=>t!==r,[n.ho.regex]:(t,r)=>new RegExp(`^(?:${r})$`).test(t),[n.ho.notRegex]:(t,r)=>!new RegExp(`^(?:${r})$`).test(t)};function T(t,r){const[l,s,c]=t;let g="";const h=Object.fromEntries(r)[l];h&&(g=h);const i=A[s];if(!i)throw new Error(`no such operator: ${s}`);return i(g,c)}function p(t,r){let[l,s]=r;const[c,g,h]=t;if(l!==c)return!1;const i=A[g];if(!i)throw new Error(`no such operator: ${g}`);return i(s,h)}}}]);

//# sourceMappingURL=3932.d9f4e1e60c7d9b572a72.js.map