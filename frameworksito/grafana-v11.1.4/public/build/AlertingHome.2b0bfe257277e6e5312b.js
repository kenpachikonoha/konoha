"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3236],{86695:(q,x,l)=>{l.r(x),l.d(x,{default:()=>Ze});var n=l(96540),$=l(32264),b=l(67061),U=l(90613),k=l(63021),M=l(40675),V=l(40980),z=l(37959),R=l(56361),g=l(32196),j=l(8867),y=l(40845),w=l(94753),O=l(72109);function K(){const a=(0,y.$j)(),t=(0,y.of)(Y);return n.createElement("div",{className:t.grid},n.createElement(T,null,n.createElement(b.B,{direction:"column",gap:1},n.createElement(w.E,{element:"h3"},"How it works"),n.createElement("ul",{className:t.list},n.createElement("li",null,"Grafana alerting periodically queries data sources and evaluates the condition defined in the alert rule"),n.createElement("li",null,"If the condition is breached, an alert instance fires"),n.createElement("li",null,"Firing instances are routed to notification policies based on matching labels"),n.createElement("li",null,"Notifications are sent out to the contact points specified in the notification policy")),n.createElement("div",{className:t.svgContainer},n.createElement(b.B,{justifyContent:"center"},n.createElement(j.default,{src:`public/img/alerting/at_a_glance_${a.name.toLowerCase()}.svg`,width:void 0,height:void 0}))))),n.createElement(T,null,n.createElement(b.B,{direction:"column",gap:1},n.createElement(w.E,{element:"h3"},"Get started"),n.createElement("ul",{className:t.list},n.createElement("li",null,n.createElement(w.E,{weight:"bold"},"Create an alert rule")," by adding queries and expressions from multiple data sources."),n.createElement("li",null,n.createElement(w.E,{weight:"bold"},"Add labels")," to your alert rules"," ",n.createElement(w.E,{weight:"bold"},"to connect them to notification policies")),n.createElement("li",null,n.createElement(w.E,{weight:"bold"},"Configure contact points")," to define where to send your notifications to."),n.createElement("li",null,n.createElement(w.E,{weight:"bold"},"Configure notification policies")," to route your alert instances to contact points.")),n.createElement(O.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/",icon:"angle-right",inline:!1,external:!0},"Read more in the docs"))))}const Y=a=>({grid:(0,g.css)({display:"grid",gridTemplateRows:"min-content auto auto",gridTemplateColumns:"1fr",gap:a.spacing(2),width:"100%",[a.breakpoints.up("lg")]:{gridTemplateColumns:"3fr 2fr"}}),ctaContainer:(0,g.css)({gridColumn:"1 / span 5"}),svgContainer:(0,g.css)({"& svg":{maxWidth:"900px",flex:1}}),list:(0,g.css)({margin:a.spacing(0,2),"& > li":{marginBottom:a.spacing(1)}})});function J({className:a}){const t=(0,y.of)(Q);return n.createElement(b.B,{gap:2,direction:"column"},n.createElement(T,{className:(0,g.cx)(t.ctaContainer,a)},n.createElement(I,{title:"Alert rules",description:"Define the condition that must be met before an alert rule fires",href:"/alerting/list",hrefText:"Manage alert rules"}),n.createElement("div",{className:t.separator}),n.createElement(I,{title:"Contact points",description:"Configure who receives notifications and how they are sent",href:"/alerting/notifications",hrefText:"Manage contact points"}),n.createElement("div",{className:t.separator}),n.createElement(I,{title:"Notification policies",description:"Configure how firing alert instances are routed to contact points",href:"/alerting/routes",hrefText:"Manage notification policies"})))}const Q=a=>({ctaContainer:(0,g.css)({padding:a.spacing(2),display:"flex",gap:a.spacing(4),justifyContent:"space-between",flexWrap:"wrap",[a.breakpoints.down("lg")]:{flexDirection:"column"}}),separator:(0,g.css)({width:"1px",backgroundColor:a.colors.border.medium,[a.breakpoints.down("lg")]:{display:"none"}})});function I({title:a,description:t,href:r,hrefText:s}){const i=(0,y.of)(Z);return n.createElement("div",{className:i.container},n.createElement(w.E,{element:"h2",variant:"h3"},a),n.createElement("div",{className:i.desc},t),n.createElement("div",{className:i.actionRow},n.createElement(O.Y,{href:r,inline:!1},s)))}const Z=a=>({container:(0,g.css)({color:a.colors.text.primary,flex:1,minWidth:"240px",display:"grid",rowGap:a.spacing(1),gridTemplateColumns:"min-content 1fr 1fr 1fr",gridTemplateRows:"min-content auto min-content","& h2":{marginBottom:0,gridColumn:"2 / span 3",gridRow:1}}),desc:(0,g.css)({gridColumn:"2 / span 3",gridRow:2}),actionRow:(0,g.css)({gridColumn:"2 / span 3",gridRow:3,maxWidth:"240px"})});function T({children:a,className:t}){const r=(0,y.of)(X);return n.createElement("div",{className:(0,g.cx)(r.box,t)},a)}const X=a=>({box:(0,g.css)({padding:a.spacing(2),backgroundColor:a.colors.background.secondary,borderRadius:a.shape.radius.default})});var ee=l(19347),e=l(16401),te=l(2913);function C({children:a}){const t=(0,y.of)(ne);return n.createElement("div",{className:t.sectionFooter},a&&n.createElement("div",null,a))}const ne=a=>({sectionFooter:(0,g.css)({marginBottom:a.spacing(2)})});function ae({datasources:a}){const t=(0,y.of)(re),r=a.map(s=>n.createElement("div",{key:s.uid},s.settings?.meta.info.logos.small&&n.createElement("img",{className:t.dsImage,src:s.settings?.meta.info.logos.small,alt:s.settings?.name||s.uid}),n.createElement("span",null,s.settings?.name||s.uid)));return n.createElement("div",{className:t.dsContainer},r)}const re=a=>({dsImage:(0,g.css)({label:"ds-image",width:"16px",marginRight:"3px"}),dsContainer:(0,g.css)({display:"flex",flexDirection:"row",fontSize:a.typography.bodySmall.fontSize,gap:"10px",marginBottom:"10px",justifyContent:"flex-end"})});function N({children:a,datasources:t}){const r=(0,y.of)(se);return n.createElement("div",{className:r.container},a,t&&n.createElement(ae,{datasources:t}))}const se=a=>({container:(0,g.css)({display:"flex",flexDirection:"row",justifyContent:"space-between"})});var D=l(50082),oe=l(37390),B=l(55852),H=l(14578),L=l(38138),ie=l(83122),le=l(29158),ue=l(25027);function d({panel:a}){const t=(0,y.of)(ce),[r,s]=(0,n.useState)(!1),i=()=>{s(!1)},p=_=>{(0,ue.AK)({useful:_,panel:a}),i()},v=n.createElement(oe.a,{title:"Rate this panel",isOpen:r,onDismiss:i,onClickBackdrop:i,className:t.container},n.createElement("div",null,n.createElement("p",null,"Help us improve this page by telling us whether this panel is useful to you!"),n.createElement("div",{className:t.buttonsContainer},n.createElement(B.$n,{variant:"secondary",className:t.buttonContainer,onClick:()=>p(!1)},n.createElement("div",{className:t.button},n.createElement(H.I,{name:"thumbs-up",className:t.thumbsdown,size:"xxxl"}),n.createElement("span",null,"I don't like it"))),n.createElement(B.$n,{variant:"secondary",className:t.buttonContainer,onClick:()=>p(!0)},n.createElement("div",{className:t.button},n.createElement(H.I,{name:"thumbs-up",size:"xxxl"}),n.createElement("span",null,"I like it")))))),h=n.createElement(L.W,null,n.createElement(L.W.Item,{label:"Rate this panel",icon:"comment-alt-message",onClick:()=>s(!0)}));return n.createElement("div",null,n.createElement(ie.m,{overlay:h,placement:"bottom-start"},n.createElement(le.K,{name:"ellipsis-v",variant:"secondary",className:t.menu,"aria-label":"Rate this panel"})),v)}const ce=a=>({buttonsContainer:(0,g.css)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",gap:"25px"}),buttonContainer:(0,g.css)({height:"150px",width:"150px",cursor:"pointer",justifyContent:"center"}),button:(0,g.css)({display:"flex",flexDirection:"column"}),container:(0,g.css)({maxWidth:"370px"}),menu:(0,g.css)({height:"25px",margin:"0"}),thumbsdown:(0,g.css)({transform:"scale(-1, -1);"})});function de(a,t){const r=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active", id="${o}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active"})',s=new e.dt({datasource:a,queries:[{refId:"A",instant:!0,expr:r}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of currently active alert rules").setData(s).setThresholds({mode:D.O.Absolute,steps:[{color:"green",value:0},{color:"green",value:80}]}).setNoValue("0").setHeaderActions(n.createElement(d,{panel:t})).build()})}var u=l(52622);function me(a,t){const r=o?`sum by(state) (grafanacloud_grafana_instance_alerting_alerts{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alerts)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]}),i=new e.Es({$data:s,transformations:[{id:"renameByRegex",options:{regex:"alerting",renamePattern:"firing"}}]});return new e.vA({...m,height:"400px",body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your alert rule instances based on state").setData(i).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("firing").overrideColor(f("firing")).matchFieldsWithName("normal").overrideColor(f("normal")).matchFieldsWithName("pending").overrideColor(f("pending")).matchFieldsWithName("error").overrideColor(f("error")).matchFieldsWithName("nodata").overrideColor(f("nodata"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function ge(a,t){const r=o?`sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m{id="${o}"}) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${o}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",s=o?`sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${o}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",i=new e.dt({datasource:a,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(i).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function F(a,t,r,s){const i=o?`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${s}", id="${o}"})`:`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${s}"})`,p=new e.dt({datasource:a,queries:[{refId:"A",instant:!0,expr:i,legendFormat:"{{state}}"}]});return new e.vA({height:"100%",body:e.d0.stat().setTitle(t).setDescription(r).setData(p).setOverrides(v=>v.matchFieldsWithName(s).overrideColor(f(s))).setNoValue("0").setHeaderActions(n.createElement(d,{panel:t})).build()})}var W=l(81160);function fe(a,t){const r=`sum by(rule_group) (grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${o}"})`,s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{rule_group}}"}]}),i=()=>v=>v.pipe((0,W.T)(h=>h.map(_=>({..._,fields:_.fields.map(E=>{const S=(E.config.displayNameFromDS||"").match(/\/rules\/\d+\/(\w+);(\w+)/);return S&&(E.config.displayName=`Folder: ${S[1]} - Group: ${S[2]}`),E})})))),p=new e.Es({$data:s,transformations:[i]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of missed iterations per evaluation group").setData(p).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setHeaderActions(n.createElement(d,{panel:t})).build()})}var pe=l(50720),ve=l(3704);function ye(a,t){const r=new e.dt({datasource:a,queries:[{refId:"A",expr:'topk(10, sum by(labels_alertname, ruleUID) (count_over_time({from="state-history"} | json | current = `Alerting` [1w])))',instant:!0}]}),s=(v,h)=>({...v,values:v.values.map((_,E)=>{const S=h.fields.find(et=>et.name==="ruleUID")?.values[E];return n.createElement(_e,{key:_,value:_,ruleUID:S})})}),i=()=>v=>v.pipe((0,W.T)(h=>h.map(_=>({..._,fields:_.fields.map(E=>E.name==="labels_alertname"?s(E,_):E)})))),p=new e.Es({$data:r,transformations:[i,{id:"sortBy",options:{fields:{},sort:[{field:"Value #A",desc:!0}]}},{id:"organize",options:{excludeByName:{Time:!0,ruleUID:!0},indexByName:{labels_alertname:0,"Value #A":1},renameByName:{labels_alertname:"Alert rule name","Value #A":"Number of fires"}}}]});return new e.vA({...m,body:e.d0.table().setTitle(t).setDescription("The alert rule instances that have fired the most").setData(p).setNoValue("No new alerts fired last week").setHeaderActions(n.createElement(d,{panel:t})).build()})}function _e({value:a,ruleUID:t}){const r=i=>({link:(0,g.css)({"& > a":{color:i.colors.text.link}})}),s=(0,y.of)(r);return n.createElement("div",{className:s.link},n.createElement(pe.N,{target:"_blank",href:(0,ve.c)(`/alerting/grafana/${t}/view`)},a))}function he(a,t){const r=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused", id="${o}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused"})',s=new e.dt({datasource:a,queries:[{refId:"A",instant:!0,expr:r}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of current paused alert rules").setData(s).setThresholds({mode:D.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions(n.createElement(d,{panel:t})).build()})}function be(a,t){const r=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("See how many of your alert rules are paused or active").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(i=>i.matchFieldsWithName("active evaluation").overrideColor(f("active evaluation"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function we(a,t){const r=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${o}"}) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are paused or active").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setOption("tooltip",{mode:u.$N.Multi}).setMax(1).setOverrides(i=>i.matchFieldsWithName("active evaluation").overrideColor(f("active evaluation"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Ee(a,t){const r=o?`sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(i=>i.matchFieldsWithName("active").overrideColor(f("active"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Ae(a,t){const r=o?`sum by (state) (grafanacloud_grafana_instance_alerting_silences{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_silences)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Ce(a,t){const r=o?`sum by (state) (grafanacloud_instance_alertmanager_alerts{id="${o}"})`:"sum by (state) (grafanacloud_instance_alertmanager_alerts)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(i=>i.matchFieldsWithName("active").overrideColor(f("active"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Se(a,t){const r=o?`sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config{id="${o}"})`:"sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{cluster}}"}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The current state of your alertmanager configuration").setData(s).setUnit("bool_yes_no").setOption("graphMode",u.$p.None).setHeaderActions(n.createElement(d,{panel:t})).build()})}function xe(a,t){const r=o?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second{id="${o}"}) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{id="${o}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",s=o?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{id="${o}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",i=new e.dt({datasource:a,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed notifications").setData(i).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Ne(a,t){const r=o?`sum by (state) (grafanacloud_instance_alertmanager_silences{id="${o}"})`:"sum by (state) (grafanacloud_instance_alertmanager_silences)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions(n.createElement(d,{panel:t})).build()})}var De=l(73134);function Fe(a,t){const r=o?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", id="${o}"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", id="${o}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"duration / interval"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The percentage of interval time spent evaluating").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setUnit("percentunit").setThresholds({mode:De.Ol.Percentage,steps:[{color:"green",value:0},{color:"red",value:80},{color:"yellow",value:60}]}).setHeaderActions(n.createElement(d,{panel:t})).build()})}function $e(a,t){const r=o?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", id="${o}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"}',s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{rule_group}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("How long it took to evaluate the rule group").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setUnit("s").setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(i=>i.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Ie(a,t){const r=o?`grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group", id="${o}} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", id="${o}}`:'grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group"} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',s=o?`grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", id="${o}}`:'grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',i=new e.dt({datasource:a,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed evaluations for the rule group").setData(i).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Te(a,t){const r=o?`grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", id="${o}"}`:'grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"interval"}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The current and historical rule group evaluation interval").setData(s).setUnit("s").setOption("graphMode",u.$p.Area).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Ge(a,t){const r=o?`sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group", id="${o}"})`:'sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group"})',s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"number of rules"}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The current and historical number of alert rules in the rule group").setData(s).setUnit("none").setOption("graphMode",u.$p.Area).setOverrides(i=>i.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setNoValue("0").setHeaderActions(n.createElement(d,{panel:t})).build()})}function Me(a,t){const r=o?`sum(grafanacloud_instance_rule_evaluations_total:rate5m{id="${o}) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{id="${o})`:"sum(grafanacloud_instance_rule_evaluations_total:rate5m) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",s=o?`sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{id="${o})`:"sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",i=new e.dt({datasource:a,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(i).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Re(a,t){const r=new e.dt({datasource:a,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="firing"})'}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of currently firing alert rule instances").setData(r).setThresholds({mode:D.O.Absolute,steps:[{color:"red",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions(n.createElement(d,{panel:t})).build()})}function Oe(a,t){const r=new e.dt({datasource:a,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS)",range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of firing and pending alert rule instances").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(s=>s.matchFieldsWithName("firing").overrideColor(f("firing"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Be(a,t){const r=new e.dt({datasource:a,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS) / ignoring(alertstate) group_left sum(ALERTS)",range:!0,legendFormat:"{{alertstate}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are firing versus pending").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setMax(1).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(s=>s.matchFieldsWithName("firing").overrideColor(f("firing"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function He(a,t){const r=o?`sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${o}"})`:"sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m)",s=new e.dt({datasource:a,queries:[{refId:"A",expr:r,range:!0,legendFormat:"missed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of evaluations missed").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(i=>i.matchFieldsWithName("missed").overrideColor(f("missed"))).setHeaderActions(n.createElement(d,{panel:t})).build()})}function Le(a,t){const r=new e.dt({datasource:a,queries:[{refId:"A",expr:'topk(10, sum by(alertname) (ALERTS{alertstate="firing"}))',instant:!0,range:!1,format:"table"}]}),s=new e.Es({$data:r,transformations:[{id:"organize",options:{excludeByName:{Time:!0},indexByName:{},renameByName:{Value:"Number of fires",alertname:"Alert Rule Name"}}}]});return new e.vA({...m,body:e.d0.table().setTitle(t).setDescription("The alert rules that have fired the most").setData(s).setHeaderActions(n.createElement(d,{panel:t})).build()})}function We(a,t){const r=new e.dt({datasource:a,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="pending"})'}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of currently pending alert rule instances").setData(r).setThresholds({mode:D.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions(n.createElement(d,{panel:t})).build()})}const G={type:"loki",uid:"grafanacloud-alert-state-history",settings:void 0},c={type:"prometheus",uid:"grafanacloud-usage",settings:void 0},A={type:"prometheus",uid:"grafanacloud-prom",settings:void 0},Pe={alerting:"red",firing:"red",active:"red",missed:"red",failed:"red",pending:"yellow",nodata:"blue","active evaluation":"blue",normal:"green",success:"green",error:"orange"};function f(a){return{mode:"fixed",fixedColor:Pe[a]}}const m={minHeight:300},qe=new e.JZ({from:"now-1w",to:"now"}),P=te.config.bootData.settings.namespace,o=P.includes("stack-")?P.replace("stack-",""):void 0;function Ue(){const a=(0,ee.l)();[G,c,A].forEach(h=>{h.settings=a.getInstanceSettings(h.uid)});const t=[],r=G.settings&&c.settings,s=!!c.settings,i=!!c.settings,p=c.settings&&A.settings,v=!!c.settings;return r&&t.push(new e.vA({ySizing:"content",body:ke()})),s&&t.push(new e.vA({ySizing:"content",body:Ve()})),p&&t.push(new e.vA({ySizing:"content",body:je()})),v&&t.push(new e.vA({ySizing:"content",body:Ke()})),i&&t.push(new e.vA({ySizing:"content",body:ze()})),new e.P1({$timeRange:qe,controls:[new e.dM({component:N,props:{children:n.createElement("div",null,"Monitor the status of your system.")}}),new e.N0,new e.KE({}),new e.WM({})],body:new e.G1({direction:"column",children:t})})}function ke(){return new e.Or({title:"Grafana-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({direction:"column",children:[new e.G1({children:[ye(G,"Top 10 firing instances"),de(c,"Active rules"),he(c,"Paused rules")]}),new e.G1({children:[me(c,"Alert instances by state"),new e.G1({height:"400px",direction:"column",children:[new e.G1({height:"400px",children:[F(c,"Firing instances","The number of currently firing alert rule instances","alerting"),F(c,"Pending instances","The number of currently pending alert rule instances","pending")]}),new e.G1({children:[F(c,"No data instances","The current number of alert rule instances in No data state","nodata"),F(c,"Error instances","The current number of alert rule instances in Error state","error")]})]})]}),new e.G1({children:[be(c,"Alert rule evaluation"),we(c,"% of alert rule evaluation")]}),new e.G1({children:[ge(c,"Evaluation success vs failures"),fe(c,"Iterations missed per evaluation group")]})]}),new e.dM({component:C})]})})}function Ve(){return new e.Or({title:"Grafana Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({children:[Ee(c,"Firing alerts by state"),Ae(c,"Silences")]}),new e.dM({component:C})]})})}function ze(){return new e.Or({title:"Mimir Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:N,props:{datasources:[c]}})}),new e.G1({children:[Ce(c,"Firing alerts by state"),xe(c,"Notification delivery")]}),new e.G1({children:[Ne(c,"Silences"),Se(c,"Invalid configuration")]}),new e.dM({component:C})]})})}function je(){return new e.Or({title:"Mimir-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:N,props:{datasources:[A,c]}})}),new e.G1({children:[Le(A,"Top 10 firing rules"),Re(A,"Firing instances"),We(A,"Pending instances")]}),new e.G1({children:[Oe(A,"Firing and pending alert instances"),Be(A,"% of alert instances by state")]}),new e.G1({children:[Me(c,"Evaluation success vs failures"),He(c,"Missed evaluations")]}),new e.dM({component:C})]})})}function Ke(){const a=new e.fS({label:"Rule Group",name:"rule_group",datasource:c,query:"label_values(grafanacloud_instance_rule_group_rules,rule_group)"});return new e.Or({title:"Mimir-managed alert rules - per rule group",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:N,props:{datasources:[c]}})}),new e.G1({children:[Ie(c,"Rule group evaluation"),Te(c,"Rule group interval")]}),new e.G1({children:[$e(c,"Rule group evaluation duration"),Ge(c,"Rules per group"),Fe(c,"Evaluation duration / interval ratio")]}),new e.dM({component:C})]}),$variables:new e.Pj({variables:[a]}),controls:[new e.K8({})]})}var Ye=l(86171);function Je(){const a=(0,y.of)(Qe),{extensions:t}=(0,Ye.u)();return t.length===0?null:n.createElement(b.B,{direction:"column",gap:2},n.createElement(w.E,{element:"h3",variant:"h4"},"Speed up your alerts creation now by using one of our tailored apps"),n.createElement(b.B,{gap:2,wrap:"wrap",direction:"row"},t.map(r=>n.createElement("div",{key:r.id,className:a.box},n.createElement(r.component,null)))))}const Qe=a=>({box:(0,g.css)({padding:a.spacing(2),flex:1,backgroundColor:a.colors.background.secondary,maxWidth:"460px"})});function Ze(){const a=(!(0,R.y$)()||(0,R.ES)())&&!!$.$.featureToggles.alertingInsights,[t,r]=(0,n.useState)(a?"insights":"overview"),s=Ue();return n.createElement(z.d,{title:"Alerting",subTitle:"Learn about problems in your systems moments after they occur",navId:"alerting"},n.createElement(b.B,{gap:2,direction:"column"},n.createElement(J,null),n.createElement(Je,null)),n.createElement(U.a,{marginTop:{lg:2,md:0,xs:0}},n.createElement(k.U,null,a&&n.createElement(M.o,{key:"insights",label:"Insights",active:t==="insights",onChangeTab:()=>r("insights")}),n.createElement(M.o,{key:"overview",label:"Get started",active:t==="overview",onChangeTab:()=>r("overview")})),n.createElement(V.J,null,t==="insights"&&n.createElement(s.Component,{model:s}),t==="overview"&&n.createElement(K,null))))}},86171:(q,x,l)=>{l.d(x,{u:()=>b});var n=l(74135),$=l(3197);function b(){return(0,$.kr)({extensionPointId:n.S.AlertingHomePage,limitPerPlugin:1})}}}]);

//# sourceMappingURL=AlertingHome.2b0bfe257277e6e5312b.js.map