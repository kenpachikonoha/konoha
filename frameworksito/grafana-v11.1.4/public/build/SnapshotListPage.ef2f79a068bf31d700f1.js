"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6590],{72602:(P,i,t)=>{t.r(i),t.d(i,{SnapshotListPage:()=>y,default:()=>K});var e=t(96540),d=t(67608),v=t(24705),p=t(32264),g=t(69529),f=t(72109),x=t(96374),r=t(8484),E=t(69064),k=t(32196),o=t(70255),u=t(55852),C=t(40845),b=t(72129);const L=({snapshot:n,onRemove:a})=>{const s=n.externalUrl||n.url;return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:s},n.name)),e.createElement("td",null,e.createElement("a",{href:s},s)),e.createElement("td",null,n.external&&e.createElement("span",{className:"query-keyword"},e.createElement(r.x6,{i18nKey:"snapshot.external-badge"},"External"))),e.createElement("td",{className:"text-center"},e.createElement(u.z9,{href:s,variant:"secondary",size:"sm",icon:"eye"},e.createElement(r.x6,{i18nKey:"snapshot.view-button"},"View"))),e.createElement("td",{className:"text-right"},e.createElement(u.$n,{variant:"destructive",size:"sm",icon:"times",onClick:a})))},A=({rootProps:n})=>{const a=(0,C.of)(N);return e.createElement("tr",{...n},e.createElement("td",null,e.createElement(o.A,{width:80})),e.createElement("td",null,e.createElement(o.A,{width:240})),e.createElement("td",null),e.createElement("td",null,e.createElement(o.A,{width:63,height:24,containerClassName:a.blockSkeleton})),e.createElement("td",null,e.createElement(o.A,{width:22,height:24,containerClassName:a.blockSkeleton})))},c=(0,b.j)(L,A),N=()=>({blockSkeleton:(0,k.css)({display:"block",lineHeight:1})});async function T(){return(0,E.s)().getSnapshots().then(n=>n.map(a=>({...a,url:`${p.$.appUrl}dashboard/snapshot/${a.key}`})))}const R=()=>{const[n,a]=(0,e.useState)([]),[s,S]=(0,e.useState)(!1),[m,h]=(0,e.useState)();(0,v.A)(async()=>{S(!0);const l=await T();S(!1),a(l)},[a]);const Y=(0,e.useCallback)(async l=>{const $=n.filter(z=>z.key!==l.key);a($),await(0,E.s)().deleteSnapshot(l.key).catch(()=>{a(n)})},[n]);return!s&&n.length===0?e.createElement(g.p,{variant:"call-to-action",message:(0,r.t)("snapshot.empty-state.message","You haven't created any snapshots yet")},e.createElement(r.x6,{i18nKey:"snapshot.empty-state.more-info"},"You can create a snapshot of any dashboard through the ",e.createElement("b",null,"Share")," modal."," ",e.createElement(f.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/share-dashboards-panels/#publish-a-snapshot"},"Learn more"))):e.createElement("div",null,e.createElement("table",{className:"filter-table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,e.createElement("strong",null,e.createElement(r.x6,{i18nKey:"snapshot.name-column-header"},"Name"))),e.createElement("th",null,e.createElement("strong",null,e.createElement(r.x6,{i18nKey:"snapshot.url-column-header"},"Snapshot url"))),e.createElement("th",{style:{width:"70px"}}),e.createElement("th",{style:{width:"30px"}}),e.createElement("th",{style:{width:"25px"}}))),e.createElement("tbody",null,s?e.createElement(e.Fragment,null,e.createElement(c.Skeleton,null),e.createElement(c.Skeleton,null),e.createElement(c.Skeleton,null)):n.map(l=>e.createElement(c,{key:l.key,snapshot:l,onRemove:()=>h(l)})))),e.createElement(x.u,{isOpen:!!m,icon:"trash-alt",title:"Delete",body:`Are you sure you want to delete '${m?.name}'?`,confirmText:"Delete",onDismiss:()=>h(void 0),onConfirm:()=>{Y(m),h(void 0)}}))},y=({})=>e.createElement(d.Y,{navId:"dashboards/snapshots"},e.createElement(d.Y.Contents,null,e.createElement(R,null))),K=y}}]);

//# sourceMappingURL=SnapshotListPage.ef2f79a068bf31d700f1.js.map