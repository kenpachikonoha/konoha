"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9199],{99199:(B,m,e)=>{e.r(m),e.d(m,{default:()=>G});var t=e(96540),f=e(42418),y=e(51488),C=e(70383),g=e(49785),E=e(67061),s=e(55852),A=e(40715),h=e(31678),S=e(61410),F=e(23770),N=e(21607),p=e(57220),c=e(56361),O=e(72399),L=e(88467),V=e(23807);const d={smtp_require_tls:!0},x=({config:r,alertManagerSourceName:n})=>{const o=(0,h.useDispatch)();(0,A.o)(a=>a.unifiedAlerting.saveAMConfig=L.jA);const{loading:l,error:i}=(0,S.$)(a=>a.saveAMConfig),v=(0,p.AL)(n),u=(0,g.mN)({defaultValues:JSON.parse(JSON.stringify({...d,...r.alertmanager_config.global??{}}))}),{handleSubmit:M,formState:{errors:P}}=u,$=a=>{o((0,F.RW)({newConfig:{...r,alertmanager_config:{...r.alertmanager_config,global:(0,O.FN)(a)}},oldConfig:r,alertManagerSourceName:n,successMessage:"Global config updated.",redirectPath:(0,c.nL)("/alerting/notifications",n)}))};return t.createElement(g.Op,{...u},t.createElement("form",{onSubmit:M($)},i&&t.createElement(f.F,{severity:"error",title:"Error saving receiver"},i.message||String(i)),N.U.map(a=>t.createElement(V.e,{readOnly:v,defaultValue:d[a.propertyName],key:a.propertyName,option:a,error:P[a.propertyName],pathPrefix:""})),t.createElement("div",null,t.createElement(E.B,null,!v&&t.createElement(t.Fragment,null,l&&t.createElement(s.$n,{disabled:!0,icon:"spinner",variant:"primary"},"Saving..."),!l&&t.createElement(s.$n,{type:"submit"},"Save global config")),t.createElement(s.z9,{disabled:l,fill:"outline",variant:"secondary",href:(0,c.nL)("alerting/notifications",n)},"Cancel")))))},G=()=>{const{selectedAlertmanager:r}=(0,C.VI)(),{data:n,isLoading:o,error:l}=(0,y.f)(r);return o&&!n?"loading...":l?t.createElement(f.F,{severity:"error",title:"Failed to fetch notification template"},String(l)):n?t.createElement(x,{config:n,alertManagerSourceName:r}):null}}}]);

//# sourceMappingURL=9199.054817393f0a246c4922.js.map