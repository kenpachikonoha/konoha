"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3772],{54391:(Le,_,n)=>{n.d(_,{R:()=>S});var B=n(32196),I=n(96540),ee=n(40845),j=n(14578),h=n(10354),ue=n(72093);const S=({name:A,onChange:Y,verifyLayerNameUniqueness:G,overrideStyles:be})=>{const Q=(0,ee.of)(te),[X,fe]=(0,I.useState)(!1),[w,le]=(0,I.useState)(null),J=D=>{fe(!0)},O=D=>{if(fe(!1),w){le(null);return}A!==D&&Y(D)},T=D=>{const ne=D.currentTarget.value.trim();if(ne.length===0){le("An empty layer name is not allowed");return}if(G&&!G(ne)&&ne!==A){le("Layer name already exists");return}w&&le(null)},Ie=D=>{O(D.currentTarget.value.trim())},Se=D=>{D.key==="Enter"&&O(D.currentTarget.value)},Oe=D=>{D.target.select()};return I.createElement(I.Fragment,null,I.createElement("div",{className:Q.wrapper},!X&&I.createElement("button",{className:Q.layerNameWrapper,title:"Edit layer name",onClick:J,"data-testid":"layer-name-div"},I.createElement("span",{className:be?"":Q.layerName},A),I.createElement(j.I,{name:"pen",className:Q.layerEditIcon,size:"sm"})),X&&I.createElement(I.Fragment,null,I.createElement(h.p,{type:"text",defaultValue:A,onBlur:Ie,autoFocus:!0,onKeyDown:Se,onFocus:Oe,invalid:w!==null,onChange:T,className:Q.layerNameInput,"data-testid":"layer-name-input"}),w&&I.createElement(ue.P,{horizontal:!0},w))))},te=A=>({wrapper:(0,B.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:A.spacing(.5)}),layerNameWrapper:(0,B.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:A.shape.radius.default,alignItems:"center",padding:`0 0 0 ${A.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:A.colors.action.hover,border:`1px dashed ${A.colors.border.strong}`},"&:focus":{border:`2px solid ${A.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,B.css)({fontWeight:A.typography.fontWeightMedium,color:A.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:A.spacing(.5)}),layerEditIcon:(0,B.cx)((0,B.css)({marginLeft:A.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,B.css)({maxWidth:"300px",margin:"-4px 0"})})},735:(Le,_,n)=>{n.d(_,{Q9:()=>ee,QB:()=>h,it:()=>I});var B=n(52622),I=(S=>(S.Auto="auto",S.Manual="manual",S))(I||{}),ee=(S=>(S.Lines="lines",S.Points="points",S.PointsAndLines="points+lines",S))(ee||{});const j={exclude:[]},h={label:B.yL.Auto,show:"points"},ue={series:[]}},80983:(Le,_,n)=>{n.r(_),n.d(_,{plugin:()=>Ct});var B=n(65158),I=n(89654),ee=n(22680),j=n(32196),h=n(96540),ue=n(84596),S=n(1173),te=n(27310),A=n(28240),Y=n(11261),G=n(40845),be=n(55852),Q=n(29158),X=n(88575),fe=n(21594),w=n(76218),le=n(54391),J=(e=>(e.Circle="circle",e.Square="square",e))(J||{}),O=(e=>(e.Auto="auto",e.Manual="manual",e))(O||{}),T=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(T||{});const Ie={id:""},Se={fillOpacity:50,show:"points"},Oe={series:[]},D=({value:e,onChange:a,context:i})=>{const u=(0,G.of)(ne),c=i.options?.mapping,m=(0,ue.A)(c),p=m!=null&&c!==m,d={frame:{matcher:{id:S.jR.byIndex,options:0}}},[o,g]=(0,h.useState)(0);(p||e==null)&&(e=[{...d}],a([...e]),o>0&&g(0));const x=()=>{e=e.concat({...d}),g(e.length-1),a([...e])},N=l=>{e=e.filter((t,r)=>r!==l),g(0),a([...e])},f=e[o],F=`${c}${o}`,s=c===O.Manual?te.X4.ExcludeBaseNames:i.data.length===1?te.X4.IncludeAll:te.X4.OnlyBaseNames;return i.data.forEach((l,t)=>{l.fields.forEach((r,E)=>{r.state={...r.state,origin:{frameIndex:t,fieldIndex:E}}})}),h.createElement(h.Fragment,null,c===O.Manual&&h.createElement(h.Fragment,null,h.createElement(be.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:x,className:u.marginBot},"Add series"),h.createElement("div",{className:u.marginBot},e.map((l,t)=>h.createElement("div",{key:`series/${t}`,className:t===o?`${u.row} ${u.sel}`:u.row,onClick:()=>g(t),role:"button","aria-label":`Select series ${t+1}`,tabIndex:0,onKeyPress:r=>{r.key==="Enter"&&g(t)}},h.createElement(le.R,{name:l.name?.fixed??`Series ${t+1}`,onChange:r=>{l.name={fixed:r===""||r===`Series ${t+1}`?void 0:r},a([...e])}}),h.createElement(Q.K,{name:"trash-alt",title:"remove",className:(0,j.cx)(u.actionIcon),onClick:()=>N(t),tooltip:"Delete series"}))))),o>=0&&f!=null&&h.createElement(h.Fragment,{key:F},h.createElement(X.D,{label:"Frame"},h.createElement(fe.l6,{placeholder:c===O.Auto?"All frames":"Select frame",isClearable:!0,options:i.data.map((l,t)=>({value:t,label:`${(0,A.Ri)(l,t)} (index: ${t}, rows: ${l.length})`})),value:f.frame?.matcher.options,onChange:l=>{l==null?delete f.frame:f.frame={matcher:{id:S.jR.byIndex,options:Number(l.value)}},a([...e])}})),h.createElement(X.D,{label:"X field"},h.createElement(w.O,{value:f.x?.matcher.options,context:i,onChange:l=>{l==null?delete f.x:f.x={matcher:{id:S.Ct.byName,options:l}},a([...e])},item:{id:"x",name:"x",settings:{filter:l=>(c===O.Auto||l.state?.origin?.frameIndex===f.frame?.matcher.options)&&l.type===Y.PU.number&&!l.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:c===O.Auto?"First number field in each frame":void 0}}})),h.createElement(X.D,{label:"Y field"},h.createElement(w.O,{value:f.y?.matcher?.options,context:i,onChange:l=>{l==null?delete f.y:f.y={matcher:{id:S.Ct.byName,options:l}},a([...e])},item:{id:"y",name:"y",settings:{filter:l=>(c===O.Auto||l.state?.origin?.frameIndex===f.frame?.matcher.options)&&l.type===Y.PU.number&&!l.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:c===O.Auto?"Remaining number fields in each frame":void 0}}})),h.createElement(X.D,{label:"Size field"},h.createElement(w.O,{value:f.size?.matcher?.options,context:i,onChange:l=>{l==null?delete f.size:f.size={matcher:{id:S.Ct.byName,options:l}},a([...e])},item:{id:"size",name:"size",settings:{filter:l=>l.name!==f.x?.matcher.options&&(c===O.Auto||l.state?.origin?.frameIndex===f.frame?.matcher.options)&&l.type===Y.PU.number&&!l.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:""}}})),h.createElement(X.D,{label:"Color field"},h.createElement(w.O,{value:f.color?.matcher?.options,context:i,onChange:l=>{l==null?delete f.color:f.color={matcher:{id:S.Ct.byName,options:l}},a([...e])},item:{id:"color",name:"color",settings:{filter:l=>l.name!==f.x?.matcher.options&&(c===O.Auto||l.state?.origin?.frameIndex===f.frame?.matcher.options)&&l.type===Y.PU.number&&!l.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:""}}}))))},ne=e=>({marginBot:(0,j.css)({marginBottom:"20px"}),row:(0,j.css)({padding:`${e.spacing(.5,1)}`,borderRadius:`${e.shape.radius.default}`,background:`${e.colors.background.secondary}`,minHeight:`${e.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${e.components.input.borderColor}`,"&:hover":{border:`1px solid ${e.components.input.borderHover}`}}),sel:(0,j.css)({border:`1px solid ${e.colors.primary.border}`,"&:hover":{border:`1px solid ${e.colors.primary.border}`}}),actionIcon:(0,j.css)({color:`${e.colors.text.secondary}`,"&:hover":{color:`${e.colors.text}`}})});var ie=n(24293),Z=n(23596),Te=n(32264),$e=n(67266),Ge=n(96516),Qe=n(81297),$=n(52622),De=n(77455),Je=n(16895),ke=n(11389),qe=n(58749),_e=n(52415),et=n(79871),tt=n(21164),lt=n(22731),ze=n(83195),he=n(85200);function se(e,a){return e.display?(0,ze.cN)(e.display(a)):`${a}`}function it(e){return e.id===S.jR.byIndex?(a,i)=>i===e.options:()=>!1}function ot(e,a,i,u){(0,A.Fm)(i),(0,A.j2)(i,u);let c=[];a.length===0&&(a=[{}]);const{palette:m,getColorByName:p}=Te.$.theme2.visualization;if(a.forEach((d,o)=>{if(e===O.Manual&&(d.frame?.matcher==null||d.x?.matcher==null||d.y?.matcher==null))return;let g=(0,he.NS)(d.x?.matcher??{id:S.Ct.byType,options:"number"}),x=(0,he.NS)(d.y?.matcher??{id:S.Ct.byType,options:"number"}),N=d.color?(0,he.NS)(d.color.matcher):null,f=d.size?(0,he.NS)(d.size.matcher):null,F=d.frame?it(d.frame.matcher):null;i.forEach((s,l)=>{if(F!=null&&!F(s,l))return;let t=[],r=[],E=s.fields.filter(y=>y.type===Y.PU.number),z=E.find(y=>g(y,s,i)),v=N!=null?E.find(y=>y!==z&&N(y,s,i)):void 0,C=f!=null?E.find(y=>y!==z&&y!==v&&f(y,s,i)):void 0;z!=null&&(E.forEach(y=>{if(y!==z&&!(e===O.Auto&&(y===v||y===C))&&!(e===O.Manual&&r.length>0)&&x(y,s,i)&&!y.config.custom?.hideFrom?.viz){let M=y,b={name:{value:d.name?.fixed??(0,A.Ct)(M,s,i)},showPoints:M.config.custom.show===T.Lines?$.yL.Never:$.yL.Always,pointShape:M.config.custom.pointShape,pointStrokeWidth:M.config.custom.pointStrokeWidth,fillOpacity:M.config.custom.fillOpacity,showLine:M.config.custom.show!==T.Points,lineWidth:M.config.custom.lineWidth??2,lineStyle:M.config.custom.lineStyle,x:{field:z},y:{field:M},color:{},size:{},_rest:t};v!=null&&(b.color.field=v),C!=null&&(b.size.field=C,b.size.min=C.config.custom.pointSize?.min??5,b.size.max=C.config.custom.pointSize?.max??100),r.push(b)}}),r.length,s.fields.forEach(y=>{r.some(({x:L,y:b,color:V,size:P})=>L.field===y||b.field===y||V.field===y||P.field===y)||t.push(y)}),c.push(...r))})}),c.length!==0){let d=0;c.forEach((o,g)=>{if(o.color.field==null){let x=o.y.field.config.color??{mode:ie.Y.PaletteClassic},N="";x.mode===ie.Y.PaletteClassic?N=p(m[d++%m.length]):x.mode===ie.Y.Fixed&&(N=p(x.fixedColor)),o.color.fixed=N}o.size.field==null&&(o.size.fixed=o.y.field.config.custom.pointSize?.fixed??5)}),at(c)}return c}function at(e){let a=e.map(c=>c.name.value.split(/\s+/g));const{prefix:i,suffix:u}=Ve(a);(i<1/0||u<1/0)&&e.forEach((c,m)=>{c.name.value=a[m].slice(i,a[m].length-u).join(" ")})}function Re(e){let a=e.map(p=>p.split(/\s+/g)),{prefix:i,suffix:u}=Ve(a),c=a[0];if(c.length===1&&i===1&&u===1)return"";let m=[];return i>0&&m.push(...c.slice(0,i)),u>0&&m.push(...c.slice(-u)),m.join(" ")}function Ve(e){let a=1/0,i=1/0,u=e[0];for(let c=1;c<e.length;c++)e[c].length<u.length&&(u=e[c]);for(let c=1;c<e.length;c++){let m=e[c];if(m!==u){let p=0;for(let o=0;o<u.length&&m[o]===u[o];o++)p++;p<a&&(a=p);let d=0;for(let o=u.length-1;o>=0&&m[o]===u[o];o--)d++;d<i&&(i=d)}}return{prefix:a,suffix:i}}function re(e,a){return e!==a&&e.includes(" ")&&(e=e.replace(a,"").trim()),e}const nt=({dataIdxs:e,seriesIdx:a,data:i,xySeries:u,dismiss:c,isPinned:m})=>{const p=(0,G.of)(lt.$),d=e.find(E=>E!==null),o=u[a-1],g=o.x.field,x=o.y.field,N=o.size.field,f=o.color.field;let F=o.name.value,s=o.color.fixed;const l={label:F,value:"",color:(0,Z.alpha)(s??"#fff",.5),colorIndicator:et.fX.marker_md},t=[{label:re(g.state?.displayName??g.name,F),value:se(g,g.values[d])},{label:re(x.state?.displayName??x.name,F),value:se(x,x.values[d])}];N!=null&&N!==x&&t.push({label:re(N.state?.displayName??N.name,F),value:se(N,N.values[d])}),f!=null&&f!==x&&t.push({label:re(f.state?.displayName??f.name,F),value:se(f,f.values[d])}),o._rest.forEach(E=>{t.push({label:re(E.state?.displayName??E.name,F),value:se(E,E.values[d])})});let r;if(m&&a!=null){const E=(0,tt.u)(x,d);r=h.createElement(qe.S,{dataLinks:E})}return h.createElement("div",{className:p.wrapper},h.createElement(_e.A,{item:l,isPinned:m}),h.createElement(ke.o,{items:t,isPinned:m}),r)};var st=n(84140),pe=n(36613),U=n(25019),rt=n(50082),dt=n(8066),ct=n(73134),mt=n(51336),We=n(4134),ut=n(88891);const ft=(e,a)=>{if(e.length===0)return{builder:null,prepData:()=>[]};let i,u;function c(s){return(t,r,E,z)=>(pe.A.orient(t,r,(v,C,y,M,L,b,V,P,K,Ce,oe,Nt,we,Ue,Rt)=>{const me=pe.A.pxRatio,H=e[r-1];let Ne=t.data[r],Me=H.showLine,Mt=H.showPoints===$.yL.Always,q=H.pointStrokeWidth??0;t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip();let ge=H.fillOpacity/100;t.ctx.fillStyle=(0,Z.alpha)(v.fill(),ge),t.ctx.strokeStyle=(0,Z.alpha)(v.stroke(),1),t.ctx.lineWidth=q;let Pt=2*Math.PI,Ke=M.key,He=L.key;const je=H.y.field.config.custom.pointSize,Pe=H.color.field!=null;let xe=(je.max??je.fixed)*me,At=t.posToVal(-xe/2,Ke),Ft=t.posToVal(t.bbox.width/me+xe/2,Ke),Lt=t.posToVal(t.bbox.height/me+xe/2,He),It=t.posToVal(-xe/2,He),Ot=s.disp.size.values(t,r),Ye=f[r-1].values,Tt=f[r-1].index,$t=f[r-1].hasAlpha,Dt=H.pointShape===J.Square,Xe=Me?new Path2D:null,ve=-1;for(let R=0;R<Ne[0].length;R++){let Ae=Ne[0][R],Fe=Ne[1][R];if(Ae>=At&&Ae<=Ft&&Fe>=Lt&&Fe<=It){let W=Math.round(Ot[R]*me),ye=b(Ae,M,Ce,P),Ee=V(Fe,L,oe,K);if(Me&&Xe.lineTo(ye,Ee),Mt){if(Pe&&Ye[R]!==ve){ve=Ye[R];let ae=ve===-1?ie.F:Tt[ve];t.ctx.fillStyle=$t?ae:(0,Z.alpha)(ae,ge),t.ctx.strokeStyle=(0,Z.alpha)(ae,1)}if(Dt){let ae=Math.round(ye-W/2),Ze=Math.round(Ee-W/2);(Pe||ge>0)&&t.ctx.fillRect(ae,Ze,W,W),q>0&&t.ctx.strokeRect(ae,Ze,W,W)}else t.ctx.beginPath(),t.ctx.arc(ye,Ee,W/2,0,Pt),(Pe||ge>0)&&t.ctx.fill(),q>0&&t.ctx.stroke();s.each(t,r,R,ye-W/2-q/2,Ee-W/2-q/2,W+q,W+q)}}}if(Me){t.ctx.strokeStyle=H.color.fixed,t.ctx.lineWidth=H.lineWidth*me;const{lineStyle:R}=H;R&&R.fill!=="solid"&&(R.fill==="dot"&&(t.ctx.lineCap="round"),t.ctx.setLineDash(R.dash??[10,10])),t.ctx.stroke(Xe)}t.ctx.restore()}),null)}let m=c({disp:{size:{values:(s,l)=>s.data[l][2]},color:{values:(s,l)=>s.data[l][3]}},each:(s,l,t,r,E,z,v)=>{r-=s.bbox.left,E-=s.bbox.top,i.add({x:r,y:E,w:z,h:v,sidx:l,didx:t})}});const p=new mt.e;p.setCursor({drag:{setScale:!0},dataIdx:(s,l)=>{if(l===1){const t=pe.A.pxRatio;u=null;let r=1/0,E=s.cursor.left*t,z=s.cursor.top*t;i.get(E,z,1,1,v=>{if((0,We.ur)(E,z,v.x,v.y,v.x+v.w,v.y+v.h)){let C=v.x+v.w/2,y=v.y+v.h/2,M=C-E,L=y-z,b=Math.sqrt(M**2+L**2);b<=v.w/2&&b<=r&&(r=b,u=v)}})}return u&&l===u.sidx?u.didx:null},points:{size:(s,l)=>u&&l===u.sidx?u.w/pe.A.pxRatio:0,fill:(s,l)=>"rgba(255,255,255,0.4)"}}),p.addHook("init",(s,l)=>{s.over.style.overflow="hidden"}),p.addHook("drawClear",s=>{i=i||new We.C$(0,0,s.bbox.width,s.bbox.height),i.clear(),s.series.forEach((l,t)=>{t>0&&(l._paths=null)})}),p.setMode(2);let d=e[0].x.field,o=d.config,g=o.custom,x=g?.scaleDistribution;p.addScale({scaleKey:"x",isTime:!1,orientation:$.Lt.Horizontal,direction:$.ON.Right,distribution:x?.type,log:x?.log,linearThreshold:x?.linearThreshold,min:o.min,max:o.max,softMin:g?.axisSoftMin,softMax:g?.axisSoftMax,centeredZero:g?.axisCenteredZero,decimals:o.decimals});let N=g.axisLabel;if(N==null||N===""){let s=e.map(t=>t.x.field.state?.displayName??""),l=e.length===1?d.state?.displayName??d.name:new Set(s).size===1?s[0]:Re(s);l!==""&&(N=l)}p.addAxis({scaleKey:"x",placement:g?.axisPlacement!==$.vM.Hidden?$.vM.Bottom:$.vM.Hidden,show:g?.axisPlacement!==$.vM.Hidden,grid:{show:g?.axisGridShow},border:{show:g?.axisBorderShow},theme:a,label:N,formatValue:(s,l)=>(0,ze.cN)(d.display(s,l))}),e.forEach((s,l)=>{let t=s.y.field;const r=s.color.fixed,E=s.color.fixed;let z=t.config.unit??"y",v=t.config,C=v.custom,y=C?.scaleDistribution;p.addScale({scaleKey:z,orientation:$.Lt.Vertical,direction:$.ON.Up,distribution:y?.type,log:y?.log,linearThreshold:y?.linearThreshold,min:v.min,max:v.max,softMin:C?.axisSoftMin,softMax:C?.axisSoftMax,centeredZero:C?.axisCenteredZero,decimals:v.decimals});let M=C.axisLabel;if(M==null||M===""){let L=e.map(V=>V.y.field.state?.displayName??""),b=e.length===1?t.state?.displayName??t.name:new Set(L).size===1?L[0]:Re(L);b!==""&&(M=b)}p.addAxis({scaleKey:z,theme:a,placement:C?.axisPlacement===$.vM.Auto?$.vM.Left:C?.axisPlacement,show:C?.axisPlacement!==$.vM.Hidden,grid:{show:C?.axisGridShow},border:{show:C?.axisBorderShow},size:C?.axisWidth,label:M,formatValue:(L,b)=>(0,ze.cN)(t.display(L,b))}),p.addSeries({facets:[{scale:"x",auto:!0},{scale:z,auto:!0}],pathBuilder:m,theme:a,scaleKey:"",lineColor:(0,Z.alpha)(r??"#ffff",1),fillColor:(0,Z.alpha)(E??"#ffff",.5),show:!t.state?.hideFrom?.viz})});const f=e.map(s=>{const l={index:[],getAll:()=>[],getOne:()=>-1,values:[],hasAlpha:!1},t=s.color.field;return t!=null&&(Object.assign(l,pt(t,a)),l.hasAlpha=l.index.some(r=>!r.endsWith("ff"))),l});function F(s){const{size:l,color:t}=ht(s);return s.forEach((r,E)=>{f[E].values=f[E].getAll(r.color.field?.values??[],t.min,t.max)}),[null,...s.map((r,E)=>{let z=r.x.field.values.length,v;if(r.size.field!=null){let{min:C,max:y}=r.size,M=C**2,b=y**2-M,V=r.size.field.values,P=l.min,Ce=l.max-P;v=Array(z);for(let oe=0;oe<V.length;oe++){let we=(V[oe]-P)/Ce,Ue=M+we*b;v[oe]=Ue**.5}}else v=Array(z).fill(r.size.fixed);return[r.x.field.values,r.y.field.values,v,Array(z).fill(r.color.fixed)]})]}return{builder:p,prepData:F}},ht=e=>{const a={size:{min:1/0,max:-1/0},color:{min:1/0,max:-1/0}};return e.forEach(i=>{[i.size,i.color].forEach((u,c)=>{if(u.field!=null){let m=c===0?a.size:a.color;const p=u.field.values;for(let d=0;d<p.length;d++){const o=p[d];o!=null&&(o<m.min&&(m.min=o),o>m.max&&(m.max=o))}}})}),a};function de(e,a){return(0,st.A)(a.visualization.getColorByName(e)).toHex8String()}function pt(e,a){let i=[],u=()=>[],c=()=>-1,m="";if(e.config.mappings?.length??!1){let p=e.config.mappings;for(let d=0;d<p.length;d++){let o=p[d];if(o.type===U.d.ValueToText)for(let g in o.options){let{color:x}=o.options[g];if(x!=null){let N=e.type===Y.PU.string?JSON.stringify(g):Number(g);m+=`v === ${N} ? ${i.length} : `,i.push(de(x,a))}}else if(o.options.result.color!=null){let{color:g}=o.options.result;if(o.type===U.d.RangeToText){let x=[];o.options.from!=null&&x.push(`v >= ${Number(o.options.from)}`),o.options.to!=null&&x.push(`v <= ${Number(o.options.to)}`),x.length>0&&(m+=`${x.join(" && ")} ? ${i.length} : `,i.push(de(g,a)))}else if(o.type===U.d.SpecialValue){let x=o.options.match;x===U.W.NaN?m+="isNaN(v)":x===U.W.NullAndNaN?m+="v == null || isNaN(v)":m+=`v ${x===U.W.True?"=== true":x===U.W.False?"=== false":x===U.W.Null?"== null":x===U.W.Empty?'=== ""':"== null"}`,m+=` ? ${i.length} : `,i.push(de(g,a))}else o.type,U.d.RegexToText}}m+="-1"}else if(e.config.color?.mode===ct.Yb.Thresholds){if(e.config.thresholds?.mode===rt.O.Absolute){let p=e.config.thresholds.steps,d=p.length-1;for(let o=d;o>0;o--)m+=`v >= ${p[o].value} ? ${o} : `;m+="0",i=p.map(o=>de(o.color,a))}}else if(e.config.color?.mode?.startsWith("continuous")){let p=(0,dt.Qi)(e).getCalculator(e,a);i=Array(32);for(let d=0;d<i.length;d++){let o=d/(i.length-1);i[d]=de(p(o,o),a)}u=(d,o,g)=>(0,ut.O4)(d,i,o,g)}return m!==""&&(c=new Function("v",`return ${m};`),u=new Function("vals",`
      let idxs = Array(vals.length);

      for (let i = 0; i < vals.length; i++) {
        let v = vals[i];
        idxs[i] = ${m};
      }

      return idxs;
    `)),{index:i,getOne:c,getAll:u}}const gt=e=>{const a=(0,G.of)(xt),i=(0,G.$j)();let{mapping:u,series:c}=e.options,m=(0,h.useMemo)(()=>ot(u,c,e.data.series,e.fieldConfig),[u,c,e.data.series,e.fieldConfig]),{builder:p,prepData:d}=(0,h.useMemo)(()=>ft(m,Te.$.theme2),[u,c,e.data.structureRev,e.fieldConfig,e.options.tooltip]),o=(0,h.useMemo)(()=>d(m),[m]),g=p==null||o.length===0?"Err":"";const x=()=>{if(!e.options.legend.showLegend)return null;const N=[];m.forEach((r,E)=>{let z=r.y.field;z.config.custom.hideFrom?.legend||N.push({yAxis:1,label:r.name.value,color:(0,Z.alpha)(r.color.fixed??ie.F,1),getItemKey:()=>`${E}-${r.name.value}`,fieldName:z.state?.displayName??z.name,disabled:z.state?.hideFrom?.viz??!1,getDisplayValues:()=>(0,Je.UO)(e.options.legend.calcs,z,i)})});const{placement:f,displayMode:F,width:s,sortBy:l,sortDesc:t}=e.options.legend;return h.createElement($e.KU.Legend,{placement:f,width:s},h.createElement(Ge.t,{className:a.legend,placement:f,items:N,displayMode:F,sortBy:l,sortDesc:t,isSortable:!0}))};return g?h.createElement("div",{className:"panel-empty"},h.createElement("p",null,g)):h.createElement($e.KU,{width:e.width,height:e.height,legend:x()},(N,f)=>h.createElement(Qe.Z,{config:p,data:o,width:N,height:f},e.options.tooltip.mode!==$.$N.None&&h.createElement(De.xl,{config:p,hoverMode:De.b3.xyOne,render:(F,s,l,t,r)=>h.createElement(nt,{data:e.data.series,dataIdxs:s,xySeries:m,dismiss:r,isPinned:t,seriesIdx:l}),maxWidth:e.options.tooltip.maxWidth})))},xt=()=>({legend:(0,j.css)({div:{justifyContent:"flex-start"}})});var k=n(37055),vt=n(38248),yt=n(11404),Be=n(43228);const Et=5;function bt(e){return{standardOptions:{[k.uo.Min]:{hideFromDefaults:!0},[k.uo.Max]:{hideFromDefaults:!0},[k.uo.Unit]:{hideFromDefaults:!0},[k.uo.Decimals]:{hideFromDefaults:!0},[k.uo.NoValue]:{hideFromDefaults:!0},[k.uo.DisplayName]:{hideFromDefaults:!0},[k.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:ie.Y.PaletteClassic}}},useCustomConfig:a=>{a.addRadio({path:"show",name:"Show",defaultValue:e.show,settings:{options:[{label:"Points",value:T.Points},{label:"Lines",value:T.Lines},{label:"Both",value:T.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:e.pointSize?.fixed??Et,settings:{min:1,max:100,step:1},showIf:i=>i.show!==T.Lines}).addNumberInput({path:"pointSize.min",name:"Min point size",showIf:i=>i.show!==T.Lines}).addNumberInput({path:"pointSize.max",name:"Max point size",showIf:i=>i.show!==T.Lines}).addRadio({path:"pointShape",name:"Point shape",defaultValue:J.Circle,settings:{options:[{value:J.Circle,label:"Circle"},{value:J.Square,label:"Square"}]},showIf:i=>i.show!==T.Lines}).addSliderInput({path:"pointStrokeWidth",name:"Point stroke width",defaultValue:1,settings:{min:0,max:10},showIf:i=>i.show!==T.Lines}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:50,settings:{min:0,max:100,step:1},showIf:i=>i.show!==T.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:i=>i.show!==T.Points,editor:Be.F,override:Be.F,process:te.hS,shouldApply:i=>i.type===Y.PU.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:e.lineWidth,settings:{min:0,max:10,step:1},showIf:i=>i.show!==T.Points}),vt.r(a,e),yt.e(a)}}}var ce=n(735);const St=e=>{const a=e?.pluginVersion??"";return a===""||parseFloat(a)<11.1?zt(e):e.options};function zt(e){const{dims:a,seriesMapping:i,series:u,...c}=e.options,{exclude:m=[],frame:p,x:d}=a??{},o=e.fieldConfig.defaults.custom;let g=u;i===ce.it.Auto&&(g=[{x:void 0,y:void 0}]);let x=0;const N=g.map(({x:F,y:s,pointColor:l,pointSize:t,frame:r})=>{const{fixed:E,field:z}=l??{},{fixed:v,field:C,min:y,max:M}=t??{};let L,b;return F==null&&d==null?L={id:S.Ct.byType,options:"number"}:L={id:S.Ct.byName,options:F??d},s==null?b={id:S.Ct.byType,options:"number"}:b={id:S.Ct.byName,options:s},z==null&&E&&o.pointColor?.fixed!==E&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(K=>K.id==="color"))||e.fieldConfig.overrides.push({matcher:b,properties:[{id:"color",value:{mode:"fixed",fixedColor:E}}]})),C==null&&v&&o.pointSize?.fixed!==v&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(K=>K.id==="custom.pointSize.fixed"))||e.fieldConfig.overrides.push({matcher:b,properties:[{id:"custom.pointSize.fixed",value:v}]})),C!=null&&(y&&o.pointSize?.min!==y&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(K=>K.id==="custom.pointSize.min"))||e.fieldConfig.overrides.push({matcher:{id:S.Ct.byName,options:C},properties:[{id:"custom.pointSize.min",value:y}]})),M&&o.pointSize?.max!==M&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(K=>K.id==="custom.pointSize.max"))||e.fieldConfig.overrides.push({matcher:{id:S.Ct.byName,options:C},properties:[{id:"custom.pointSize.max",value:M}]}))),{frame:{matcher:{id:S.jR.byIndex,options:r??(i===ce.it.Manual?x++:p??0)}},x:{matcher:L},y:{matcher:b,...m.length&&{exclude:{id:S.Ct.byNames,options:m}}},...z&&{color:{matcher:{id:S.Ct.byName,options:z}}},...C&&{size:{matcher:{id:S.Ct.byName,options:C}}}}});return{...c,mapping:i===ce.it.Auto?ce.it.Auto:ce.it.Manual,series:N}}const Ct=new B.m(gt).setMigrationHandler(St).useFieldConfig(bt(Se)).setPanelOptions(e=>{e.addRadio({path:"mapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"series",path:"series",name:"",editor:D,defaultValue:[{}]}),I.D(e,!0),ee.H(e)})}}]);

//# sourceMappingURL=xychart2.4979d5189c5d2f0d30a7.js.map